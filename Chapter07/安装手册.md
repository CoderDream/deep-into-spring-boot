

## 7.1 FastDFS安装

FastDFS分为服务端和客户端API两部分，服务端又分为跟踪器（Tracker）和存储节点（Storage）两个角色。跟踪器主要负责服务调度，起着负载均衡的作用。存储节点主要负责文件的存储、读取和同步等功能。客户端API提供了文件的上传、下载和删除等操作方法。

典型的FastDFS服务器的网络拓扑结构如图7-1所示，客户端连接跟踪器服务器集群，跟踪器管理存储节点集群，为客户端提供可用的存储节点。

![img](https://res.weread.qq.com/wrepub/epub_844490_62)

图7-1　FastDFS服务器网络拓扑

FastDFS支持动态扩展，当资源快要耗尽时，可以通过增加新卷（或新组）的方法，增加更多的存储节点。

存储节点的文件使用了分卷（或分组）的组织方式，所以一个文件的标识由卷名（或组名）、路径和文件名等部分组成。

为了演示使用FastFDS，使用虚拟机安装了三个Linux系统。表7-1列出了三个服务器的IP地址、安装的操作系统和各自的用途。表7-1　FastFDS服务器列表

![img](https://res.weread.qq.com/wrepub/epub_844490_63)

|       IP       |   系统   |      用途      |
| :------------: | :------: | :------------: |
| 172.16.130.172 | CentOS 7 | Tracker Server |
| 172.16.130.173 | CentOS 7 | Storage Server |
| 172.16.130.174 | CentOS 7 | Storage Server |

下面将按照步骤说明安装的过程，由于使用Nginx提供文件的浏览访问功能，同时也需要安装Nginx服务，对于文件的组织方式使用了分组的方法，并建立了一个分组：group1。

### 7.1.1 下载安装包

登录Tracker Server，使用下列指令切换到opt目录。

```
cd /opt
```

然后使用wget指令下载下列各个安装包，最后将下载的文件拷贝到其他两台服务器的相同目录中（注：检出实例工程后，在doc目录中包含下列安装包）。

1. 下载FastDFS 5.01

2. 下载nginx 1.7.0

3. 下载fastdfs-nginx-module_v1.16

### 7.1.2 安装服务

三台服务器上都要安装FastDFS和Nginx，其中FastFDS使用了默认的安装配置，Nginx使用了自定义的安装配置。

要执行安装指令，系统中必须具有编译环境，如果系统还没有编译环境，可以使用下列指令增加编译环境。

```
yum -y install gcc gcc+ gcc-c++ openssl openssl-devel pcre pcrd-deve
```

1. 创建系统用户

```
useradd fastdfs -M -s /sbin/nologin
useradd nginx -M -s /sbin/nologin
```

2. 安装FastFDS

```
tar xf FastDFS_v5.01.tar.gz
cd FastDFS
./make.sh
./make.sh install
```



```
[root@localhost FastDFS]# ./make.sh
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/hash.o ../common/hash.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/chain.o ../common/chain.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/base64.o ../common/base64.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/shared_func.o ../common/shared_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/ini_file_reader.o ../common/ini_file_reader.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/logger.o ../common/logger.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/sockopt.o ../common/sockopt.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/fdfs_global.o ../common/fdfs_global.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/sched_thread.o ../common/sched_thread.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/http_func.o ../common/http_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/md5.o ../common/md5.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/pthread_func.o ../common/pthread_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/local_ip_func.o ../common/local_ip_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/connection_pool.o ../common/connection_pool.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/process_ctrl.o ../common/process_ctrl.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/ioevent.o ../common/ioevent.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/fast_timer.o ../common/fast_timer.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/fast_task_queue.o ../common/fast_task_queue.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/ioevent_loop.o ../common/ioevent_loop.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_proto.o tracker_proto.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_mem.o tracker_mem.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_service.o tracker_service.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_status.o tracker_status.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_global.o tracker_global.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_func.o tracker_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o fdfs_shared_func.o fdfs_shared_func.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_nio.o tracker_nio.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_relationship.o tracker_relationship.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_dump.o tracker_dump.c  -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/linux_stack_trace.o ../common/linux_stack_trace.c  -I../common -I/usr/local/include
../common/linux_stack_trace.c: 在函数‘signal_stack_trace_print’中:
../common/linux_stack_trace.c:82:4: 警告：格式 ‘%lx’ expects argument of type ‘long unsigned int’, but argument 4 has type ‘greg_t’ [-Wformat=]
    i, ucontext->uc_mcontext.gregs[i]);
    ^
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_trackerd fdfs_trackerd.c  ../common/hash.o ../common/chain.o ../common/base64.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/fdfs_global.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/connection_pool.o ../common/process_ctrl.o ../common/ioevent.o ../common/fast_timer.o ../common/fast_task_queue.o ../common/ioevent_loop.o tracker_proto.o tracker_mem.o tracker_service.o tracker_status.o tracker_global.o tracker_func.o fdfs_shared_func.o tracker_nio.o tracker_relationship.o tracker_dump.o ../common/linux_stack_trace.o -L/usr/local/lib  -lpthread -ldl -rdynamic -I../common -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/fast_mblock.o ../common/fast_mblock.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/avl_tree.o ../common/avl_tree.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o tracker_client_thread.o tracker_client_thread.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_global.o storage_global.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_func.o storage_func.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_service.o storage_service.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_sync.o storage_sync.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_nio.o storage_nio.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_dio.o storage_dio.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
storage_dio.c: 在函数‘storage_dio_get_thread_index’中:
storage_dio.c:195:21: 警告：变量‘pClientInfo’被设定但未被使用 [-Wunused-but-set-variable]
  StorageClientInfo *pClientInfo;
                     ^
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_ip_changed_dealer.o storage_ip_changed_dealer.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_param_getter.o storage_param_getter.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_disk_recovery.o storage_disk_recovery.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o trunk_mgr/trunk_mem.o trunk_mgr/trunk_mem.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o trunk_mgr/trunk_shared.o trunk_mgr/trunk_shared.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o trunk_mgr/trunk_sync.o trunk_mgr/trunk_sync.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o trunk_mgr/trunk_client.o trunk_mgr/trunk_client.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o trunk_mgr/trunk_free_block_checker.o trunk_mgr/trunk_free_block_checker.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../client/client_global.o ../client/client_global.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../client/tracker_client.o ../client/tracker_client.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../client/storage_client.o ../client/storage_client.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../client/client_func.o ../client/client_func.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o fdht_client/fdht_proto.o fdht_client/fdht_proto.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o fdht_client/fdht_client.o fdht_client/fdht_client.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o fdht_client/fdht_func.o fdht_client/fdht_func.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o fdht_client/fdht_global.o fdht_client/fdht_global.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o storage_dump.o storage_dump.c  -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_storaged fdfs_storaged.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/fdfs_global.o ../common/base64.o ../common/sched_thread.o ../common/local_ip_func.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/fast_mblock.o ../common/avl_tree.o ../common/connection_pool.o ../common/process_ctrl.o ../common/ioevent.o ../common/fast_timer.o ../common/fast_task_queue.o ../common/ioevent_loop.o ../tracker/fdfs_shared_func.o ../tracker/tracker_proto.o tracker_client_thread.o storage_global.o storage_func.o storage_service.o storage_sync.o storage_nio.o storage_dio.o storage_ip_changed_dealer.o storage_param_getter.o storage_disk_recovery.o trunk_mgr/trunk_mem.o trunk_mgr/trunk_shared.o trunk_mgr/trunk_sync.o trunk_mgr/trunk_client.o trunk_mgr/trunk_free_block_checker.o ../client/client_global.o ../client/tracker_client.o ../client/storage_client.o ../client/client_func.o fdht_client/fdht_proto.o fdht_client/fdht_client.o fdht_client/fdht_func.o fdht_client/fdht_global.o storage_dump.o ../common/linux_stack_trace.o -L/usr/local/lib  -lpthread -ldl -rdynamic -I. -Itrunk_mgr -I../common -I../tracker -I../client -Ifdht_client -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/fdfs_http_shared.o ../common/fdfs_http_shared.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -o ../common/mime_file_parser.o ../common/mime_file_parser.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/hash.lo ../common/hash.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/chain.lo ../common/chain.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/shared_func.lo ../common/shared_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/ini_file_reader.lo ../common/ini_file_reader.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/logger.lo ../common/logger.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/sockopt.lo ../common/sockopt.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/base64.lo ../common/base64.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/sched_thread.lo ../common/sched_thread.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/http_func.lo ../common/http_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/md5.lo ../common/md5.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/pthread_func.lo ../common/pthread_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/local_ip_func.lo ../common/local_ip_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/avl_tree.lo ../common/avl_tree.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/connection_pool.lo ../common/connection_pool.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/fdfs_global.lo ../common/fdfs_global.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/fdfs_http_shared.lo ../common/fdfs_http_shared.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../common/mime_file_parser.lo ../common/mime_file_parser.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../tracker/tracker_proto.lo ../tracker/tracker_proto.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../tracker/fdfs_shared_func.lo ../tracker/fdfs_shared_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o ../storage/trunk_mgr/trunk_shared.lo ../storage/trunk_mgr/trunk_shared.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o tracker_client.lo tracker_client.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o client_func.lo client_func.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o client_global.lo client_global.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -c -fPIC -o storage_client.lo storage_client.c  -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_monitor fdfs_monitor.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_test fdfs_test.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_test1 fdfs_test1.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_crc32 fdfs_crc32.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_upload_file fdfs_upload_file.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_download_file fdfs_download_file.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_delete_file fdfs_delete_file.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_file_info fdfs_file_info.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_appender_test fdfs_appender_test.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_appender_test1 fdfs_appender_test1.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_append_file fdfs_append_file.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o fdfs_upload_appender fdfs_upload_appender.c  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o -lpthread -ldl -rdynamic -I../common -I../tracker -I/usr/local/include
ar cru libfastcommon.a  ../common/hash.o ../common/chain.o ../common/shared_func.o ../common/ini_file_reader.o ../common/logger.o ../common/sockopt.o ../common/base64.o ../common/sched_thread.o ../common/http_func.o ../common/md5.o ../common/pthread_func.o ../common/local_ip_func.o ../common/avl_tree.o ../common/connection_pool.o
ar cru libfdfsclient.a  ../common/fdfs_global.o ../common/fdfs_http_shared.o ../common/mime_file_parser.o ../tracker/tracker_proto.o ../tracker/fdfs_shared_func.o ../storage/trunk_mgr/trunk_shared.o tracker_client.o client_func.o client_global.o storage_client.o
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o libfastcommon.so.1  -shared ../common/hash.lo ../common/chain.lo ../common/shared_func.lo ../common/ini_file_reader.lo ../common/logger.lo ../common/sockopt.lo ../common/base64.lo ../common/sched_thread.lo ../common/http_func.lo ../common/md5.lo ../common/pthread_func.lo ../common/local_ip_func.lo ../common/avl_tree.lo ../common/connection_pool.lo -lpthread -ldl -rdynamic
ln -fs libfastcommon.so.1 libfastcommon.so
cc -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -g -O -DDEBUG_FLAG -DOS_LINUX -DIOEVENT_USE_EPOLL -o libfdfsclient.so.1  -shared ../common/fdfs_global.lo ../common/fdfs_http_shared.lo ../common/mime_file_parser.lo ../tracker/tracker_proto.lo ../tracker/fdfs_shared_func.lo ../storage/trunk_mgr/trunk_shared.lo tracker_client.lo client_func.lo client_global.lo storage_client.lo -lpthread -ldl -rdynamic -L. -lfastcommon
ln -fs libfdfsclient.so.1 libfdfsclient.so
```



```
[root@localhost FastDFS]# ./make.sh install
mkdir -p /usr/local/bin
mkdir -p /etc/fdfs
cp -f fdfs_trackerd  /usr/local/bin
if [ ! -f /etc/fdfs/tracker.conf ]; then cp -f ../conf/tracker.conf ../conf/mime.types ../conf/http.conf /etc/fdfs; fi
mkdir -p /usr/local/bin
mkdir -p /etc/fdfs
cp -f fdfs_storaged  /usr/local/bin
if [ ! -f /etc/fdfs/storage.conf ]; then cp -f ../conf/storage.conf ../conf/mime.types ../conf/http.conf /etc/fdfs; fi
mkdir -p /usr/local/bin
mkdir -p /etc/fdfs
mkdir -p /usr/local/lib
cp -f fdfs_monitor fdfs_test fdfs_test1 fdfs_crc32 fdfs_upload_file fdfs_download_file fdfs_delete_file fdfs_file_info fdfs_appender_test fdfs_appender_test1 fdfs_append_file fdfs_upload_appender /usr/local/bin
if [ 0 -eq 1 ]; then cp -f libfastcommon.a libfdfsclient.a /usr/local/lib; fi
if [ 1 -eq 1 ]; then cp -f libfastcommon.so.1 libfdfsclient.so.1 /usr/local/lib; fi
if [ 1 -eq 1 ]; then ln -fs /usr/local/lib/libfastcommon.so.1 /usr/local/lib/libfastcommon.so; fi
if [ 1 -eq 1 ]; then ln -fs /usr/local/lib/libfdfsclient.so.1 /usr/local/lib/libfdfsclient.so; fi
if [ ! -f /etc/fdfs/client.conf ]; then cp -f ../conf/client.conf ../conf/http.conf /etc/fdfs; fi
mkdir -p /usr/local/include
mkdir -p /usr/local/include/fastcommon
mkdir -p /usr/local/include/fastdfs
cp -f ../common/common_define.h ../common/hash.h ../common/chain.h ../common/logger.h ../common/base64.h ../common/shared_func.h ../common/pthread_func.h ../common/ini_file_reader.h ../common/sockopt.h ../common/sched_thread.h ../common/http_func.h ../common/md5.h ../common/_os_bits.h ../common/local_ip_func.h ../common/avl_tree.h ../common/connection_pool.h /usr/local/include/fastcommon
cp -f ../common/fdfs_define.h ../common/fdfs_global.h ../common/mime_file_parser.h ../common/fdfs_http_shared.h ../tracker/tracker_types.h ../tracker/tracker_proto.h ../tracker/fdfs_shared_func.h ../storage/trunk_mgr/trunk_shared.h tracker_client.h storage_client.h storage_client1.h client_func.h client_global.h fdfs_client.h /usr/local/include/fastdfs
if [ 1 -eq 1 -a /usr/local/lib = "/usr/local/lib" ]; then sh ./fdfs_link_library.sh; fi
[root@localhost FastDFS]#
```

3. 安装Nginx

   - Tracker Server

     ```
     
     ```

     

     ```
     [root@localhost nginx-1.7.0]# ./configure --user=nginx --group=nginx --prefix=/usr/local/nginx
     checking for OS
      + Linux 4.4.226-1.el7.elrepo.x86_64 x86_64
     checking for C compiler ... found
      + using GNU C compiler
      + gcc version: 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)
     checking for gcc -pipe switch ... found
     checking for gcc builtin atomic operations ... found
     checking for C99 variadic macros ... found
     checking for gcc variadic macros ... found
     checking for unistd.h ... found
     checking for inttypes.h ... found
     checking for limits.h ... found
     checking for sys/filio.h ... not found
     checking for sys/param.h ... found
     checking for sys/mount.h ... found
     checking for sys/statvfs.h ... found
     checking for crypt.h ... found
     checking for Linux specific features
     checking for epoll ... found
     checking for EPOLLRDHUP ... found
     checking for O_PATH ... found
     checking for sendfile() ... found
     checking for sendfile64() ... found
     checking for sys/prctl.h ... found
     checking for prctl(PR_SET_DUMPABLE) ... found
     checking for sched_setaffinity() ... found
     checking for crypt_r() ... found
     checking for sys/vfs.h ... found
     checking for poll() ... found
     checking for /dev/poll ... not found
     checking for kqueue ... not found
     checking for crypt() ... not found
     checking for crypt() in libcrypt ... found
     checking for F_READAHEAD ... not found
     checking for posix_fadvise() ... found
     checking for O_DIRECT ... found
     checking for F_NOCACHE ... not found
     checking for directio() ... not found
     checking for statfs() ... found
     checking for statvfs() ... found
     checking for dlopen() ... not found
     checking for dlopen() in libdl ... found
     checking for sched_yield() ... found
     checking for SO_SETFIB ... not found
     checking for SO_ACCEPTFILTER ... not found
     checking for TCP_DEFER_ACCEPT ... found
     checking for TCP_KEEPIDLE ... found
     checking for TCP_FASTOPEN ... found
     checking for TCP_INFO ... found
     checking for accept4() ... found
     checking for int size ... 4 bytes
     checking for long size ... 8 bytes
     checking for long long size ... 8 bytes
     checking for void * size ... 8 bytes
     checking for uint64_t ... found
     checking for sig_atomic_t ... found
     checking for sig_atomic_t size ... 4 bytes
     checking for socklen_t ... found
     checking for in_addr_t ... found
     checking for in_port_t ... found
     checking for rlim_t ... found
     checking for uintptr_t ... uintptr_t found
     checking for system byte ordering ... little endian
     checking for size_t size ... 8 bytes
     checking for off_t size ... 8 bytes
     checking for time_t size ... 8 bytes
     checking for setproctitle() ... not found
     checking for pread() ... found
     checking for pwrite() ... found
     checking for sys_nerr ... found
     checking for localtime_r() ... found
     checking for posix_memalign() ... found
     checking for memalign() ... found
     checking for mmap(MAP_ANON|MAP_SHARED) ... found
     checking for mmap("/dev/zero", MAP_SHARED) ... found
     checking for System V shared memory ... found
     checking for POSIX semaphores ... not found
     checking for POSIX semaphores in libpthread ... found
     checking for struct msghdr.msg_control ... found
     checking for ioctl(FIONBIO) ... found
     checking for struct tm.tm_gmtoff ... found
     checking for struct dirent.d_namlen ... not found
     checking for struct dirent.d_type ... found
     checking for sysconf(_SC_NPROCESSORS_ONLN) ... found
     checking for openat(), fstatat() ... found
     checking for getaddrinfo() ... found
     checking for PCRE library ... found
     checking for PCRE JIT support ... found
     checking for md5 in system md library ... not found
     checking for md5 in system md5 library ... not found
     checking for md5 in system OpenSSL crypto library ... found
     checking for sha1 in system md library ... not found
     checking for sha1 in system OpenSSL crypto library ... found
     checking for zlib library ... found
     creating objs/Makefile
     
     Configuration summary
       + using system PCRE library
       + OpenSSL library is not used
       + md5: using system crypto library
       + sha1: using system crypto library
       + using system zlib library
     
       nginx path prefix: "/usr/local/nginx"
       nginx binary file: "/usr/local/nginx/sbin/nginx"
       nginx configuration prefix: "/usr/local/nginx/conf"
       nginx configuration file: "/usr/local/nginx/conf/nginx.conf"
       nginx pid file: "/usr/local/nginx/logs/nginx.pid"
       nginx error log file: "/usr/local/nginx/logs/error.log"
       nginx http access log file: "/usr/local/nginx/logs/access.log"
       nginx http client request body temporary files: "client_body_temp"
       nginx http proxy temporary files: "proxy_temp"
       nginx http fastcgi temporary files: "fastcgi_temp"
       nginx http uwsgi temporary files: "uwsgi_temp"
       nginx http scgi temporary files: "scgi_temp"
     
     [root@localhost nginx-1.7.0]#
     ```

     

     ```
     [root@localhost nginx-1.7.0]# make install
     make -f objs/Makefile install
     make[1]: 进入目录“/opt/nginx-1.7.0”
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/nginx.o \
     	src/core/nginx.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_log.o \
     	src/core/ngx_log.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_palloc.o \
     	src/core/ngx_palloc.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_array.o \
     	src/core/ngx_array.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_list.o \
     	src/core/ngx_list.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_hash.o \
     	src/core/ngx_hash.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_buf.o \
     	src/core/ngx_buf.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_queue.o \
     	src/core/ngx_queue.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_output_chain.o \
     	src/core/ngx_output_chain.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_string.o \
     	src/core/ngx_string.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_parse.o \
     	src/core/ngx_parse.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_inet.o \
     	src/core/ngx_inet.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_file.o \
     	src/core/ngx_file.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_crc32.o \
     	src/core/ngx_crc32.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_murmurhash.o \
     	src/core/ngx_murmurhash.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_md5.o \
     	src/core/ngx_md5.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_rbtree.o \
     	src/core/ngx_rbtree.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_radix_tree.o \
     	src/core/ngx_radix_tree.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_slab.o \
     	src/core/ngx_slab.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_times.o \
     	src/core/ngx_times.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_shmtx.o \
     	src/core/ngx_shmtx.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_connection.o \
     	src/core/ngx_connection.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_cycle.o \
     	src/core/ngx_cycle.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_spinlock.o \
     	src/core/ngx_spinlock.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_cpuinfo.o \
     	src/core/ngx_cpuinfo.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_conf_file.o \
     	src/core/ngx_conf_file.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_resolver.o \
     	src/core/ngx_resolver.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_open_file_cache.o \
     	src/core/ngx_open_file_cache.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_crypt.o \
     	src/core/ngx_crypt.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_proxy_protocol.o \
     	src/core/ngx_proxy_protocol.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event.o \
     	src/event/ngx_event.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_timer.o \
     	src/event/ngx_event_timer.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_posted.o \
     	src/event/ngx_event_posted.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_busy_lock.o \
     	src/event/ngx_event_busy_lock.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_accept.o \
     	src/event/ngx_event_accept.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_connect.o \
     	src/event/ngx_event_connect.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/ngx_event_pipe.o \
     	src/event/ngx_event_pipe.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_time.o \
     	src/os/unix/ngx_time.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_errno.o \
     	src/os/unix/ngx_errno.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_alloc.o \
     	src/os/unix/ngx_alloc.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_files.o \
     	src/os/unix/ngx_files.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_socket.o \
     	src/os/unix/ngx_socket.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_recv.o \
     	src/os/unix/ngx_recv.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_readv_chain.o \
     	src/os/unix/ngx_readv_chain.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_udp_recv.o \
     	src/os/unix/ngx_udp_recv.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_send.o \
     	src/os/unix/ngx_send.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_writev_chain.o \
     	src/os/unix/ngx_writev_chain.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_channel.o \
     	src/os/unix/ngx_channel.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_shmem.o \
     	src/os/unix/ngx_shmem.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_process.o \
     	src/os/unix/ngx_process.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_daemon.o \
     	src/os/unix/ngx_daemon.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_setaffinity.o \
     	src/os/unix/ngx_setaffinity.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_setproctitle.o \
     	src/os/unix/ngx_setproctitle.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_posix_init.o \
     	src/os/unix/ngx_posix_init.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_user.o \
     	src/os/unix/ngx_user.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_process_cycle.o \
     	src/os/unix/ngx_process_cycle.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_linux_init.o \
     	src/os/unix/ngx_linux_init.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/event/modules/ngx_epoll_module.o \
     	src/event/modules/ngx_epoll_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/os/unix/ngx_linux_sendfile_chain.o \
     	src/os/unix/ngx_linux_sendfile_chain.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/src/core/ngx_regex.o \
     	src/core/ngx_regex.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http.o \
     	src/http/ngx_http.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_core_module.o \
     	src/http/ngx_http_core_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_special_response.o \
     	src/http/ngx_http_special_response.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_request.o \
     	src/http/ngx_http_request.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_parse.o \
     	src/http/ngx_http_parse.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_header_filter_module.o \
     	src/http/ngx_http_header_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_write_filter_module.o \
     	src/http/ngx_http_write_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_copy_filter_module.o \
     	src/http/ngx_http_copy_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_log_module.o \
     	src/http/modules/ngx_http_log_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_request_body.o \
     	src/http/ngx_http_request_body.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_variables.o \
     	src/http/ngx_http_variables.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_script.o \
     	src/http/ngx_http_script.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_upstream.o \
     	src/http/ngx_http_upstream.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_upstream_round_robin.o \
     	src/http/ngx_http_upstream_round_robin.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_parse_time.o \
     	src/http/ngx_http_parse_time.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_static_module.o \
     	src/http/modules/ngx_http_static_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_index_module.o \
     	src/http/modules/ngx_http_index_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_chunked_filter_module.o \
     	src/http/modules/ngx_http_chunked_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_range_filter_module.o \
     	src/http/modules/ngx_http_range_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_headers_filter_module.o \
     	src/http/modules/ngx_http_headers_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_not_modified_filter_module.o \
     	src/http/modules/ngx_http_not_modified_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_busy_lock.o \
     	src/http/ngx_http_busy_lock.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_file_cache.o \
     	src/http/ngx_http_file_cache.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_gzip_filter_module.o \
     	src/http/modules/ngx_http_gzip_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/ngx_http_postpone_filter_module.o \
     	src/http/ngx_http_postpone_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_ssi_filter_module.o \
     	src/http/modules/ngx_http_ssi_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_charset_filter_module.o \
     	src/http/modules/ngx_http_charset_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_userid_filter_module.o \
     	src/http/modules/ngx_http_userid_filter_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_autoindex_module.o \
     	src/http/modules/ngx_http_autoindex_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_auth_basic_module.o \
     	src/http/modules/ngx_http_auth_basic_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_access_module.o \
     	src/http/modules/ngx_http_access_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_limit_conn_module.o \
     	src/http/modules/ngx_http_limit_conn_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_limit_req_module.o \
     	src/http/modules/ngx_http_limit_req_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_geo_module.o \
     	src/http/modules/ngx_http_geo_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_map_module.o \
     	src/http/modules/ngx_http_map_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_split_clients_module.o \
     	src/http/modules/ngx_http_split_clients_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_referer_module.o \
     	src/http/modules/ngx_http_referer_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_rewrite_module.o \
     	src/http/modules/ngx_http_rewrite_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_proxy_module.o \
     	src/http/modules/ngx_http_proxy_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_fastcgi_module.o \
     	src/http/modules/ngx_http_fastcgi_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_uwsgi_module.o \
     	src/http/modules/ngx_http_uwsgi_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_scgi_module.o \
     	src/http/modules/ngx_http_scgi_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_memcached_module.o \
     	src/http/modules/ngx_http_memcached_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_empty_gif_module.o \
     	src/http/modules/ngx_http_empty_gif_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_browser_module.o \
     	src/http/modules/ngx_http_browser_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_upstream_ip_hash_module.o \
     	src/http/modules/ngx_http_upstream_ip_hash_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_upstream_least_conn_module.o \
     	src/http/modules/ngx_http_upstream_least_conn_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules \
     	-o objs/src/http/modules/ngx_http_upstream_keepalive_module.o \
     	src/http/modules/ngx_http_upstream_keepalive_module.c
     cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \
     	-o objs/ngx_modules.o \
     	objs/ngx_modules.c
     cc -o objs/nginx \
     objs/src/core/nginx.o \
     objs/src/core/ngx_log.o \
     objs/src/core/ngx_palloc.o \
     objs/src/core/ngx_array.o \
     objs/src/core/ngx_list.o \
     objs/src/core/ngx_hash.o \
     objs/src/core/ngx_buf.o \
     objs/src/core/ngx_queue.o \
     objs/src/core/ngx_output_chain.o \
     objs/src/core/ngx_string.o \
     objs/src/core/ngx_parse.o \
     objs/src/core/ngx_inet.o \
     objs/src/core/ngx_file.o \
     objs/src/core/ngx_crc32.o \
     objs/src/core/ngx_murmurhash.o \
     objs/src/core/ngx_md5.o \
     objs/src/core/ngx_rbtree.o \
     objs/src/core/ngx_radix_tree.o \
     objs/src/core/ngx_slab.o \
     objs/src/core/ngx_times.o \
     objs/src/core/ngx_shmtx.o \
     objs/src/core/ngx_connection.o \
     objs/src/core/ngx_cycle.o \
     objs/src/core/ngx_spinlock.o \
     objs/src/core/ngx_cpuinfo.o \
     objs/src/core/ngx_conf_file.o \
     objs/src/core/ngx_resolver.o \
     objs/src/core/ngx_open_file_cache.o \
     objs/src/core/ngx_crypt.o \
     objs/src/core/ngx_proxy_protocol.o \
     objs/src/event/ngx_event.o \
     objs/src/event/ngx_event_timer.o \
     objs/src/event/ngx_event_posted.o \
     objs/src/event/ngx_event_busy_lock.o \
     objs/src/event/ngx_event_accept.o \
     objs/src/event/ngx_event_connect.o \
     objs/src/event/ngx_event_pipe.o \
     objs/src/os/unix/ngx_time.o \
     objs/src/os/unix/ngx_errno.o \
     objs/src/os/unix/ngx_alloc.o \
     objs/src/os/unix/ngx_files.o \
     objs/src/os/unix/ngx_socket.o \
     objs/src/os/unix/ngx_recv.o \
     objs/src/os/unix/ngx_readv_chain.o \
     objs/src/os/unix/ngx_udp_recv.o \
     objs/src/os/unix/ngx_send.o \
     objs/src/os/unix/ngx_writev_chain.o \
     objs/src/os/unix/ngx_channel.o \
     objs/src/os/unix/ngx_shmem.o \
     objs/src/os/unix/ngx_process.o \
     objs/src/os/unix/ngx_daemon.o \
     objs/src/os/unix/ngx_setaffinity.o \
     objs/src/os/unix/ngx_setproctitle.o \
     objs/src/os/unix/ngx_posix_init.o \
     objs/src/os/unix/ngx_user.o \
     objs/src/os/unix/ngx_process_cycle.o \
     objs/src/os/unix/ngx_linux_init.o \
     objs/src/event/modules/ngx_epoll_module.o \
     objs/src/os/unix/ngx_linux_sendfile_chain.o \
     objs/src/core/ngx_regex.o \
     objs/src/http/ngx_http.o \
     objs/src/http/ngx_http_core_module.o \
     objs/src/http/ngx_http_special_response.o \
     objs/src/http/ngx_http_request.o \
     objs/src/http/ngx_http_parse.o \
     objs/src/http/ngx_http_header_filter_module.o \
     objs/src/http/ngx_http_write_filter_module.o \
     objs/src/http/ngx_http_copy_filter_module.o \
     objs/src/http/modules/ngx_http_log_module.o \
     objs/src/http/ngx_http_request_body.o \
     objs/src/http/ngx_http_variables.o \
     objs/src/http/ngx_http_script.o \
     objs/src/http/ngx_http_upstream.o \
     objs/src/http/ngx_http_upstream_round_robin.o \
     objs/src/http/ngx_http_parse_time.o \
     objs/src/http/modules/ngx_http_static_module.o \
     objs/src/http/modules/ngx_http_index_module.o \
     objs/src/http/modules/ngx_http_chunked_filter_module.o \
     objs/src/http/modules/ngx_http_range_filter_module.o \
     objs/src/http/modules/ngx_http_headers_filter_module.o \
     objs/src/http/modules/ngx_http_not_modified_filter_module.o \
     objs/src/http/ngx_http_busy_lock.o \
     objs/src/http/ngx_http_file_cache.o \
     objs/src/http/modules/ngx_http_gzip_filter_module.o \
     objs/src/http/ngx_http_postpone_filter_module.o \
     objs/src/http/modules/ngx_http_ssi_filter_module.o \
     objs/src/http/modules/ngx_http_charset_filter_module.o \
     objs/src/http/modules/ngx_http_userid_filter_module.o \
     objs/src/http/modules/ngx_http_autoindex_module.o \
     objs/src/http/modules/ngx_http_auth_basic_module.o \
     objs/src/http/modules/ngx_http_access_module.o \
     objs/src/http/modules/ngx_http_limit_conn_module.o \
     objs/src/http/modules/ngx_http_limit_req_module.o \
     objs/src/http/modules/ngx_http_geo_module.o \
     objs/src/http/modules/ngx_http_map_module.o \
     objs/src/http/modules/ngx_http_split_clients_module.o \
     objs/src/http/modules/ngx_http_referer_module.o \
     objs/src/http/modules/ngx_http_rewrite_module.o \
     objs/src/http/modules/ngx_http_proxy_module.o \
     objs/src/http/modules/ngx_http_fastcgi_module.o \
     objs/src/http/modules/ngx_http_uwsgi_module.o \
     objs/src/http/modules/ngx_http_scgi_module.o \
     objs/src/http/modules/ngx_http_memcached_module.o \
     objs/src/http/modules/ngx_http_empty_gif_module.o \
     objs/src/http/modules/ngx_http_browser_module.o \
     objs/src/http/modules/ngx_http_upstream_ip_hash_module.o \
     objs/src/http/modules/ngx_http_upstream_least_conn_module.o \
     objs/src/http/modules/ngx_http_upstream_keepalive_module.o \
     objs/ngx_modules.o \
     -lpthread -lcrypt -lpcre -lcrypto -lcrypto -lz
     test -d '/usr/local/nginx' || mkdir -p '/usr/local/nginx'
     test -d '/usr/local/nginx/sbin' 		|| mkdir -p '/usr/local/nginx/sbin'
     test ! -f '/usr/local/nginx/sbin/nginx' 		|| mv '/usr/local/nginx/sbin/nginx' 			'/usr/local/nginx/sbin/nginx.old'
     cp objs/nginx '/usr/local/nginx/sbin/nginx'
     test -d '/usr/local/nginx/conf' 		|| mkdir -p '/usr/local/nginx/conf'
     cp conf/koi-win '/usr/local/nginx/conf'
     cp conf/koi-utf '/usr/local/nginx/conf'
     cp conf/win-utf '/usr/local/nginx/conf'
     test -f '/usr/local/nginx/conf/mime.types' 		|| cp conf/mime.types '/usr/local/nginx/conf'
     cp conf/mime.types '/usr/local/nginx/conf/mime.types.default'
     test -f '/usr/local/nginx/conf/fastcgi_params' 		|| cp conf/fastcgi_params '/usr/local/nginx/conf'
     cp conf/fastcgi_params 		'/usr/local/nginx/conf/fastcgi_params.default'
     test -f '/usr/local/nginx/conf/fastcgi.conf' 		|| cp conf/fastcgi.conf '/usr/local/nginx/conf'
     cp conf/fastcgi.conf '/usr/local/nginx/conf/fastcgi.conf.default'
     test -f '/usr/local/nginx/conf/uwsgi_params' 		|| cp conf/uwsgi_params '/usr/local/nginx/conf'
     cp conf/uwsgi_params 		'/usr/local/nginx/conf/uwsgi_params.default'
     test -f '/usr/local/nginx/conf/scgi_params' 		|| cp conf/scgi_params '/usr/local/nginx/conf'
     cp conf/scgi_params 		'/usr/local/nginx/conf/scgi_params.default'
     test -f '/usr/local/nginx/conf/nginx.conf' 		|| cp conf/nginx.conf '/usr/local/nginx/conf/nginx.conf'
     cp conf/nginx.conf '/usr/local/nginx/conf/nginx.conf.default'
     test -d '/usr/local/nginx/logs' 		|| mkdir -p '/usr/local/nginx/logs'
     test -d '/usr/local/nginx/logs' || 		mkdir -p '/usr/local/nginx/logs'
     test -d '/usr/local/nginx/html' 		|| cp -R html '/usr/local/nginx'
     test -d '/usr/local/nginx/logs' || 		mkdir -p '/usr/local/nginx/logs'
     make[1]: 离开目录“/opt/nginx-1.7.0”
     [root@localhost nginx-1.7.0]#
     ```

     

     

     

     ```
     cd /opt
     tar xf fastdfs-nginx-module_v1.16.tar.gz
     tar xf nginx-1.7.0.tar.gz
     cd nginx-1.7.0
     ./configure --user=nginx --group=nginx --prefix=/usr/local/nginx
     make
     make install
     ```

   - Storage Server

     ```
     
     ```

     

     ```
     [root@localhost nginx-1.7.0]# ./configure --user=nginx --group=nginx --prefix=/usr/local/nginx --add-module=../fastdfs-nginx-module/src
     checking for OS
      + Linux 4.4.226-1.el7.elrepo.x86_64 x86_64
     checking for C compiler ... found
      + using GNU C compiler
      + gcc version: 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)
     checking for gcc -pipe switch ... found
     checking for gcc builtin atomic operations ... found
     checking for C99 variadic macros ... found
     checking for gcc variadic macros ... found
     checking for unistd.h ... found
     checking for inttypes.h ... found
     checking for limits.h ... found
     checking for sys/filio.h ... not found
     checking for sys/param.h ... found
     checking for sys/mount.h ... found
     checking for sys/statvfs.h ... found
     checking for crypt.h ... found
     checking for Linux specific features
     checking for epoll ... found
     checking for EPOLLRDHUP ... found
     checking for O_PATH ... found
     checking for sendfile() ... found
     checking for sendfile64() ... found
     checking for sys/prctl.h ... found
     checking for prctl(PR_SET_DUMPABLE) ... found
     checking for sched_setaffinity() ... found
     checking for crypt_r() ... found
     checking for sys/vfs.h ... found
     checking for poll() ... found
     checking for /dev/poll ... not found
     checking for kqueue ... not found
     checking for crypt() ... not found
     checking for crypt() in libcrypt ... found
     checking for F_READAHEAD ... not found
     checking for posix_fadvise() ... found
     checking for O_DIRECT ... found
     checking for F_NOCACHE ... not found
     checking for directio() ... not found
     checking for statfs() ... found
     checking for statvfs() ... found
     checking for dlopen() ... not found
     checking for dlopen() in libdl ... found
     checking for sched_yield() ... found
     checking for SO_SETFIB ... not found
     checking for SO_ACCEPTFILTER ... not found
     checking for TCP_DEFER_ACCEPT ... found
     checking for TCP_KEEPIDLE ... found
     checking for TCP_FASTOPEN ... found
     checking for TCP_INFO ... found
     checking for accept4() ... found
     checking for int size ... 4 bytes
     checking for long size ... 8 bytes
     checking for long long size ... 8 bytes
     checking for void * size ... 8 bytes
     checking for uint64_t ... found
     checking for sig_atomic_t ... found
     checking for sig_atomic_t size ... 4 bytes
     checking for socklen_t ... found
     checking for in_addr_t ... found
     checking for in_port_t ... found
     checking for rlim_t ... found
     checking for uintptr_t ... uintptr_t found
     checking for system byte ordering ... little endian
     checking for size_t size ... 8 bytes
     checking for off_t size ... 8 bytes
     checking for time_t size ... 8 bytes
     checking for setproctitle() ... not found
     checking for pread() ... found
     checking for pwrite() ... found
     checking for sys_nerr ... found
     checking for localtime_r() ... found
     checking for posix_memalign() ... found
     checking for memalign() ... found
     checking for mmap(MAP_ANON|MAP_SHARED) ... found
     checking for mmap("/dev/zero", MAP_SHARED) ... found
     checking for System V shared memory ... found
     checking for POSIX semaphores ... not found
     checking for POSIX semaphores in libpthread ... found
     checking for struct msghdr.msg_control ... found
     checking for ioctl(FIONBIO) ... found
     checking for struct tm.tm_gmtoff ... found
     checking for struct dirent.d_namlen ... not found
     checking for struct dirent.d_type ... found
     checking for sysconf(_SC_NPROCESSORS_ONLN) ... found
     checking for openat(), fstatat() ... found
     checking for getaddrinfo() ... found
     configuring additional modules
     adding module in ../fastdfs-nginx-module/src
      + ngx_http_fastdfs_module was configured
     checking for PCRE library ... found
     checking for PCRE JIT support ... found
     checking for md5 in system md library ... not found
     checking for md5 in system md5 library ... not found
     checking for md5 in system OpenSSL crypto library ... found
     checking for sha1 in system md library ... not found
     checking for sha1 in system OpenSSL crypto library ... found
     checking for zlib library ... found
     creating objs/Makefile
     
     Configuration summary
       + using system PCRE library
       + OpenSSL library is not used
       + md5: using system crypto library
       + sha1: using system crypto library
       + using system zlib library
     
       nginx path prefix: "/usr/local/nginx"
       nginx binary file: "/usr/local/nginx/sbin/nginx"
       nginx configuration prefix: "/usr/local/nginx/conf"
       nginx configuration file: "/usr/local/nginx/conf/nginx.conf"
       nginx pid file: "/usr/local/nginx/logs/nginx.pid"
       nginx error log file: "/usr/local/nginx/logs/error.log"
       nginx http access log file: "/usr/local/nginx/logs/access.log"
       nginx http client request body temporary files: "client_body_temp"
       nginx http proxy temporary files: "proxy_temp"
       nginx http fastcgi temporary files: "fastcgi_temp"
       nginx http uwsgi temporary files: "uwsgi_temp"
       nginx http scgi temporary files: "scgi_temp"
     
     ```

     

     ```
     objs/ngx_modules.o \
     -lpthread -lcrypt -L/usr/local/lib -lfastcommon -lfdfsclient -lpcre -lcrypto -lcrypto -lz
     make[1]: 离开目录“/opt/nginx-1.7.0”
     make -f objs/Makefile manpage
     make[1]: 进入目录“/opt/nginx-1.7.0”
     sed -e "s|%%PREFIX%%|/usr/local/nginx|" \
     	-e "s|%%PID_PATH%%|/usr/local/nginx/logs/nginx.pid|" \
     	-e "s|%%CONF_PATH%%|/usr/local/nginx/conf/nginx.conf|" \
     	-e "s|%%ERROR_LOG_PATH%%|/usr/local/nginx/logs/error.log|" \
     	< man/nginx.8 > objs/nginx.8
     make[1]: 离开目录“/opt/nginx-1.7.0”
     [root@localhost nginx-1.7.0]#
     ```

     

     ```
     [root@localhost nginx-1.7.0]# make install
     make -f objs/Makefile install
     make[1]: 进入目录“/opt/nginx-1.7.0”
     test -d '/usr/local/nginx' || mkdir -p '/usr/local/nginx'
     test -d '/usr/local/nginx/sbin' 		|| mkdir -p '/usr/local/nginx/sbin'
     test ! -f '/usr/local/nginx/sbin/nginx' 		|| mv '/usr/local/nginx/sbin/nginx' 			'/usr/local/nginx/sbin/nginx.old'
     cp objs/nginx '/usr/local/nginx/sbin/nginx'
     test -d '/usr/local/nginx/conf' 		|| mkdir -p '/usr/local/nginx/conf'
     cp conf/koi-win '/usr/local/nginx/conf'
     cp conf/koi-utf '/usr/local/nginx/conf'
     cp conf/win-utf '/usr/local/nginx/conf'
     test -f '/usr/local/nginx/conf/mime.types' 		|| cp conf/mime.types '/usr/local/nginx/conf'
     cp conf/mime.types '/usr/local/nginx/conf/mime.types.default'
     test -f '/usr/local/nginx/conf/fastcgi_params' 		|| cp conf/fastcgi_params '/usr/local/nginx/conf'
     cp conf/fastcgi_params 		'/usr/local/nginx/conf/fastcgi_params.default'
     test -f '/usr/local/nginx/conf/fastcgi.conf' 		|| cp conf/fastcgi.conf '/usr/local/nginx/conf'
     cp conf/fastcgi.conf '/usr/local/nginx/conf/fastcgi.conf.default'
     test -f '/usr/local/nginx/conf/uwsgi_params' 		|| cp conf/uwsgi_params '/usr/local/nginx/conf'
     cp conf/uwsgi_params 		'/usr/local/nginx/conf/uwsgi_params.default'
     test -f '/usr/local/nginx/conf/scgi_params' 		|| cp conf/scgi_params '/usr/local/nginx/conf'
     cp conf/scgi_params 		'/usr/local/nginx/conf/scgi_params.default'
     test -f '/usr/local/nginx/conf/nginx.conf' 		|| cp conf/nginx.conf '/usr/local/nginx/conf/nginx.conf'
     cp conf/nginx.conf '/usr/local/nginx/conf/nginx.conf.default'
     test -d '/usr/local/nginx/logs' 		|| mkdir -p '/usr/local/nginx/logs'
     test -d '/usr/local/nginx/logs' || 		mkdir -p '/usr/local/nginx/logs'
     test -d '/usr/local/nginx/html' 		|| cp -R html '/usr/local/nginx'
     test -d '/usr/local/nginx/logs' || 		mkdir -p '/usr/local/nginx/logs'
     make[1]: 离开目录“/opt/nginx-1.7.0”
     [root@localhost nginx-1.7.0]#
     ```

     

     

     

     ```
     cd /opt
     tar xf fastdfs-nginx-module_v1.16.tar.gz
     tar xf nginx-1.7.0.tar.gz
     cd nginx-1.7.0
     ./configure --user=nginx --group=nginx --prefix=/usr/local/nginx --add-module=../fastdfs-nginx-module/src
     make
     make install
     ```

注意　在Tracker Server上安装Nginx，不需要--add-module=../fastdfs-nginx-module/src这个配置项，而两个Storage Server的安装必须加上这个配置项。

### 7.1.3 Tracker Server 配置

1. 创建数据及日志存放目录

```
mkdir -p /data/fastdfs/tracker
```

2. 修改tracker.conf配置

```
vi /etc/fdfs/tracker.conf
```

更改下列两行配置：

```
base_path=/data/fastdfs/tracker
group_name=group1
```

3. 修改nginx.conf配置

```
vi /usr/local/nginx/conf/nginx.conf
```

修改完成后如代码清单7-1所示，这是Tracker Server的一个负载均衡配置（代码内容可以从工程的doc目录nginx.conf-tracker文件中复制进来）。注意这里的TrackerServer开放访问端口为84（非必须，只因为80端口已经作为其他用途）。

代码清单7-1　Tracker Server的Nginx配置

```
user nginx nginx;
worker_processes  4;

pid /usr/local/nginx/nginx.pid;

worker_rlimit_nofile 51200;

events {
    use epoll;
    worker_connections  20480;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for" "$request_time"';

    access_log  usr/local/niginx/logs/access.log  main;

    upstream server_group1 {
        server 170.16.130.174;
        server 170.16.130.175;
    }

    server {
        listen       84;
        server_name  170.16.130.173;

        location /group1 {
            include proxy.conf;
            proxy_pass http://server_group1
        }
    }
}
```

4. 配置Tracker Server启动程序

使用如下指令配置Tracker Server的启动程序，并将其设置为随系统启动自动启动。

```
cp /opt/FastDFS/init.d/fdfs_trackerd /etc/init.d/
chkconfig --add fdfs_trackerd
chkconfig fdfs_trackerd on
```

5. 配置Nginx的启动程序使用下面指令创建一个启动文件：

```
vi /etc/init.d/nginx


[oneproxy]
keepalive = 1
event-threads = 4
log-file = log/oneproxy.log
pid-file = log/oneproxy.pid
lck-file = log/oneproxy.lck
mysql-version = 5.7.19
proxy-address = :3306
proxy-master-addresses.1 = 10.10.10.35:3306@group1
proxy-master-addresses.2 = 10.10.10.25:3306@group2
proxy-slave-addresses.1 = 10.10.10.36:3306@group1
proxy-slave-addresses.2 = 10.10.10.37:3306@group1
proxy-slave-addresses.3 = 10.10.10.26:3306@group2
proxy-slave-addresses.4 = 10.10.10.27:3306@group2
proxy-user-list.1 = orderuser/40739ED24B5DC118DC16397AB14E64C680637C0D@orderdb
proxy-user-list.2 = merchantuser/40739ED24B5DC118DC16397AB14E64C680637C0D@merchantdb
proxy-part-tables.1 = /usr/local/oneproxy/conf/part1.txt
proxy-charset = utf8_bin
proxy-group-policy.1 = group1:read_balance
proxy-group-policy.2 = group2:read_balance
proxy-group-security.1 = group1:0
proxy-group-security.2 = group2:0
proxy-security-level = 0
proxy-sequence.1 = default
#监控端口
proxy-httpserver = :8080
#自动剔除节点
proxy-replication-check = 1
proxy-httptitle = OneProxy Monitor
```

然后编辑（可以复制实例工程中doc目录的nginx文件内容）如代码清单7-2所示的内容。

代码清单7-2　Nginx启动程序

```bash
#!/bin/bash
# nginx Startup script for the Nginx HTTP Server
# it is v.0.0.2 version.
# chkconfig: - 85 15
# description: Nginx is a high-performance web and proxy server.
#              It has a lot of features, but it's not for everyone.
# processname: nginx
# pidfile: /var/run/nginx.pid
# config: /usr/local/nginx/conf/nginx.conf
nginxd=/usr/local/nginx/sbin/nginx
nginx_config=/usr/local/nginx/conf/nginx.conf
nginx_pid=/var/run/nginx.pid
RETVAL=0
prog="nginx"
# Source function library.
. /etc/rc.d/init.d/functions
# Source networking configuration.
. /etc/sysconfig/network
# Check that networking is up.
[ ${NETWORKING} = "no" ] && exit 0
[ -x $nginxd ] || exit 0
# Start nginx daemons functions.
start() {
if [ -e $nginx_pid ];then
   echo "nginx already running...."
   exit 1
fi
   echo -n $"Starting $prog: "
   daemon $nginxd -c ${nginx_config}
   RETVAL=$?
   echo
   [ $RETVAL = 0 ] && touch /var/lock/subsys/nginx
   return $RETVAL
}
# Stop nginx daemons functions.
stop() {
        echo -n $"Stopping $prog: "
        killproc $nginxd
        RETVAL=$?
        echo
        [ $RETVAL = 0 ] && rm -f /var/lock/subsys/nginx /var/run/nginx.pid
}
# reload nginx service functions.
reload() {
    echo -n $"Reloading $prog: "
    #kill -HUP `cat ${nginx_pid}`
    killproc $nginxd -HUP
    RETVAL=$?
    echo
}
# See how we were called.
case "$1" in
start)
        start
        ;;
stop)
        stop
        ;;
reload)
        reload
        ;;
restart)
        stop
        start
        ;;
status)
        status $prog
        RETVAL=$?
        ;;
*)
        echo $"Usage: $prog {start|stop|restart|reload|status|help}"
        exit 1
esac
exit $RETVAL
```

将上面文件保存后，使用下列指令，修改为任何人可执行，并将其设定为随系统启动自动启动：

```
chmod 755 /etc/init.d/nginx
chkconfig --add nginx
chkconfig nginx on
```

### 7.1.4 Storage Server 配置

两台Storage Server都要进行下列相关的配置。

1. 创建数据及日志保存目录

```
mkdir -p /data/fastdfs/storage/data
```

2. 修改storage.conf配置

```
vi /etc/fdfs/storage.conf
```

修改下列配置项，其他保持默认设置：

```bash
group_name=group1
base_path=/data/fastdfs
store_path0=/data/fastdfs/storage
tracker_server=172.16.130.173:22122
run_by_group=fastdfs
run_by_user=fastdfs
file_distribute_path_mode=1
retate_error_log=true
```

3. 修改mod_fastdfs.conf配置

```bash
cp /opt/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/
vi /etc/fdfs/mod_fastdfs.conf
```

修改下列各项配置：

```bash
connect_timeout=30
tracker_server=172.16.130.173:22122
group_name=group1
url_have_group_name=true
store_path_count=1
store_path0=/data/fastdfs/storage
```

4. 修改nginx.conf配置

```
vi /usr/local/nginx/conf/nginx.conf
```

Storage Server的Nginx配置如代码清单7-3所示，监听80端口，并使用fastdfs-nginx-module模块（代码内容保存在工程的doc目录nginx.conf-storage文件中）。

代码清单7-3　Storage Server的Nginx配置

```
user nginx nginx;
worker_processes  4;


pid /usr/local/nginx/nginx.pid;

worker_rlimit_nofile 1024;

events {
    use epoll;
    worker_connections  1024;
}

http {
    include       mime.types;
    server_names_hash_bucket_size 128;
    client_header_buffer_size 32k;
    large_client_header_buffers 4 32k;
    client_max_body_size 20m;
    limit_rate 1024k;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /usr/local/niginx/logs/access.log  main;

    server {
        listen       80;
        server_name  170.16.130.174;

        location /group1/M00 {
            root   /data/fastdfs/storage/data;
            ngx_fastdfs_module;            
        }
    }
}
```

使用下列指令创建一个M00软连接，让配置中的M00同样指向data目录。

```
ln -s /data/fastdfs/storage/data /data/fastdfs/storage/data/M00
```

5. 配置Storage Server的启动程序

```
cp /opt/FastDFS/init.d/fdfs_storaged /etc/init.d/
chkconfig --add fdfs_storaged
chkconfig fdfs_storaged on
```

6. 配置Nginx的启动程序

Nginx的启动程序配置与Tracker Server的配置相同。如果不使用自定义的启动程序，也可以使用下列指令启动Nginx。

```
/usr/local/nginx/sbin/nginx
```

### 7.1.5 启动服务

1. 启动Tracker Server

```
service fdfs_trackerd start
service nginx start

user  nginx nginx;
worker_processes 4;
pid /usr/local/nginx/nginx.pid;
worker_rlimit_nofile 51200;
events {
	use epoll;
	worker_connections 20480;
}
http
{
    include       mime.types;
    default_type  application/octet-stream;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request"'
            '$status $body_bytes_sent "$http_referer"'
            '"$http_user_agent" "$http_x_forwarded_for" "$request_time"';
    access_log /usr/local/nginx/logs/access.log main;
    upstream server_group1{
            server 192.168.1.215;
            server 192.168.1.216;
    }
    server {
            listen 84;
            server_name 192.168.1.214;
            location /group1 {
                include proxy.conf;
                proxy_pass http://server_group1;
            }
    }
}


root@172.16.130.173's password:
Last login: Fri Aug 28 17:50:47 2020 from 172.16.130.1
[root@localhost ~]# systemctl status nginx.service
● nginx.service - SYSV: Nginx is a high-performance web and proxy server.
   Loaded: loaded (/etc/rc.d/init.d/nginx; bad; vendor preset: disabled)
   Active: activating (start) since 五 2020-08-28 17:54:27 CST; 1min 6s ago
     Docs: man:systemd-sysv-generator(8)
   CGroup: /system.slice/nginx.service
           ├─1030 nginx: master process /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
           ├─1032 nginx: worker process
           ├─1033 nginx: worker process
           ├─1034 nginx: worker process
           └─1035 nginx: worker process

8月 28 17:54:27 localhost.localdomain systemd[1]: Starting SYSV: Nginx is a high-performance web and proxy server....
8月 28 17:54:27 localhost.localdomain systemd[1]: Can't open PID file /var/run/nginx.pid (yet?) after start: No such file or directory
[root@localhost ~]#


```

2. 启动Storage Server

```
service fdfs_storaged start
service nginx start
```

启动后，可以使用下列指令来查看各个服务的进程。

```
ps -ef|grep fdfs
ps -ef|grep nginx
```

如果能查看到服务进程，一般就说明已经启动成功。

### 7.1.6 客户端测试

1. 在Tracker Server中配置一个客户端

```
vi /etc/fdfs/client.conf
```

修改下列配置项：

```bash
base_path=/data/fastdfs
tracker_server=172.16.130.172:22122
```

2. 查看服务的运行情况

在Tracker Server使用下列指令可以查看服务的运行情况：

```
fdfs_monitor /etc/fdfs/clent.conf
```

3. 测试文件上传

如果在当前路径（例如/opt）中存在一个图片文件：01.jpg，即可使用下列指令来测试上传文件：

```
fdfs_upload_file /etc/fdfs/client.conf 01.jpg
```

上传成功后将返回已经保存的文件标识，它包含组名、路径和文件名，如下所示：

```
group1/M00/00/00/dafjoioaer80141ljkldifjefojoad0.jpg
```

4. 使用浏览器访问文件

使用上面配置的Tracker Server的Web服务端口，就可以使用下面完整的URL访问上面上传的文件：

```
http://172.16.130.172:84/group1/M00/00/00/dafjoioaer80141ljkldifjefojoad0.jpg
```

注意　上面这个链接只是本地局域网的地址，如果要在互联网中使用，必须使用外网IP或者域名。

现在，就可以在安装的两台Storage Server服务器中其中一台的/data目录中找到已经保存的文件。

上面测试成功，表明FastFDS安装成功，并且已经正常运行，接着介绍如何在应用系统中使用分布式文件系统。上面安装方法参考于http://www.itindex.net/detail/49559-fastdfs-nginx-%E9%87%8F%E-7%BA%A7。









实验环境，所以打算把跟踪器和存储器安装到同一台实例上

1、准备安装包上传到/usr/local/src

 FastDFS_v5.05.tar.gz  （FastDFS安装包）

 libfastcommonV1.0.7.tar.gz （FastDFS依赖程序）

 nginx-1.8.0.tar.gz （nginx安装包，用于做文件请求http代理服务器）

 fastdfs-nginx-module_v1.16.tar.gz （nginx和fastdfs的桥梁插件模块）

2、安装C/C++ 编译环境

```
yum -y install gcc gcc-c++
```

3、安装 libfastcommon

```
cd /usr/local/src
tar -zxf    libfastcommonV1.0.7.tar.gz
cd libfastcommon-1.0.7
./make.sh
./make.sh install
cp /usr/lib64/libfastcommon.so /usr/lib
```

4、创建数据存储目录

```
mkdir -p /usr/local/FastDFS/tracker  /usr/local/FastDFS/storage /usr/local/FastDFS/client
```

5、安装FastDFS 

```
cd /usr/local/src
tar -zxf FastDFS_v5.05.tar.gz
cd FastDFS
./make.sh
./make.sh install
cd conf
cp * /etc/fdfs
```

6、编辑/etc/fdfs/tracker.conf

```
vi /etc/fdfs/tracker.conf
base_path=/usr/local/FastDFS/tracker
```

7、启动tracker 

```
/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf 
```

8、配置storage节点

```
vi /etc/fdfs/storage.conf
# base_path
base_path=/usr/local/FastDFS/storage
# store_path
store_path0=/usr/local/FastDFS/storage
# tracker_server
tracker_server=172.16.130.176:22122
```

9、启动storage节点

```
/usr/bin/fdfs_storaged /etc/fdfs/storage.conf
```

10、配置测试

从编译完的FastDFS目录复制libfastclient.so 到/usr/lib目录

```
cd /usr/local/src/FastDFS/client

cp libfdfsclient.so /usr/lib

cp /usr/local/src/FastDFS/client/libfdfsclient.so /usr/lib
```

11、修改测试配置文件

```
vi /etc/fdfs/client.conf

base_path=/usr/local/FastDFS/client

tracker_server=172.16.130.176:22122
```

12、测试上传

```
/usr/bin/fdfs_test /etc/fdfs/client.conf upload xxx.png

[root@localhost client]# /usr/bin/fdfs_test /etc/fdfs/client.conf upload /usr/local/src/grafana-k8s-cluster-dashboard.png
This is FastDFS client test program v5.05

Copyright (C) 2008, Happy Fish / YuQing

FastDFS may be copied only under the terms of the GNU General
Public License V3, which may be found in the FastDFS source kit.
Please visit the FastDFS Home Page http://www.csource.org/
for more detail.

[2020-08-28 15:48:48] DEBUG - base_path=/usr/local/FastDFS/client, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0

tracker_query_storage_store_list_without_group:
	server 1. group_name=, ip_addr=172.16.130.176, port=23000

group_name=group1, ip_addr=172.16.130.176, port=23000
storage_upload_by_filename
group_name=group1, remote_filename=M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405.png
source ip address: 172.16.130.176
file timestamp=2020-08-28 15:48:48
file size=491506
file crc32=2466928886
example file url: http://172.16.130.176/group1/M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405.png
storage_upload_slave_by_filename
group_name=group1, remote_filename=M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405_big.png
source ip address: 172.16.130.176
file timestamp=2020-08-28 15:48:48
file size=491506
file crc32=2466928886
example file url: http://172.16.130.176/group1/M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405_big.png

http://172.16.130.176/group1/M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405.png
http://172.16.130.176/group1/M00/00/00/rBCCsF9ItuCAEfQcAAd_8pMKWPY405.png
[root@localhost client]#
```

13、安装nginx

```
 yum install -y gcc-c++   (已安装)

 yum install -y pcre pcre-devel

 yum install -y zlib zlib-devel

 yum install -y openssl openssl-devel
 
 yum install -y pcre pcre-devel zlib zlib-devel openssl openssl-devel
```

14、解压fastdfs-nginx-module_v1.16.tar.gz

```
cd /usr/local/src

tar -zxf fastdfs-nginx-module_v1.16.tar.gz
```

15、修改fastdfs-nginx-module/src/config配置文件

  把CORE_INCS="$CORE_INCS /usr/local/include/fastdfs /usr/include/fastcommon/"

  修改为：CORE_INCS="$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/"


  把CORE_LIBS="$CORE_LIBS -L/usr/local/lib -lfastcommon -lfdfsclient"

  修改为：CORE_LIBS="$CORE_LIBS -L/usr/lib -lfastcommon -lfdfsclient"

实际就是把路径中的local这一层删除掉

16、复制fastdfs-nginx-module/src/mod_fastdfs.conf 到/etc/fdfs目录下

```
cp fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs
```



并编辑

```
tracker_server=172.16.130.176:22122

url_have_group_name = true

storage_server_port=23000

group_name=group1

store_path0=/usr/local/FastDFS/storage
```


17、安装nginx

```
cd /usr/local/src
tar -zxf  nginx-1.8.1.tar.gz
cd nginx-1.8.1
./configure --add-module=/usr/local/src/fastdfs-nginx-module/src/
make
make install
```

18、配置nginx

```
cd /usr/local/nginx/conf

vim nginx.conf
server{
    listen     80;
    server_name     localhost;
    location /group1/M00/{
        ngx_fastdfs_module;
    }
}
```

重启nginx

```
/usr/local/nginx/sbin/nginx
```









